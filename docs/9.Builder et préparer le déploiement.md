# Builder et préparer le déploiement

Nous arrivons à la phase finale. Pour transformer le code Vue en fichiers statiques (HTML, CSS, JS) lisibles par n'importe quel serveur, nous devons utiliser la commande de build de Vue CLI.

Lancer la commande :

```bash
npm run build
```

Cette commande va créer un dossier `dist` à la racine de votre projet. C'est ce dossier (et uniquement lui) que l'on devra envoyer en ligne sur le serveur d'hébergement.

## Déploiement gratuit (Vercel ou Netlify)

1. Vercel (le plus simple)

   - Installe l'outil : `npm i -g vercel`

   - Tape `vercel` à la racine de ton projet.

   - Réponds aux questions (Laisse les choix par défaut).

   - **Le point crucial** : Dans les réglages sur le site de Vercel, ne pas oublier d'ajouter la Environment Variable `VITE_API_URL` avec l'adresse réelle du backend (si on l'a déjà déployé).

2. Astuce pour le Router : Comme Vue Router utilise le mode "History", si on rafraîchit la page `/login` une fois en ligne, on aura une erreur 404. Pour éviter cela, on va créer un fichier `vercel.json` à la racine du projet :

    ```json
    {
    "rewrites": [
        { "source": "/(.*)", "destination": "/index.html" }
    ]
    }
    ```

    Cela permettra de rediriger toutes les requêtes vers `index.html`, et Vue Router pourra gérer la navigation correctement.

3. Autre option : **Netlify**

   - Créer un compte sur [Netlify](https://www.netlify.com/).

   - Connecter le dépôt GitHub, GitLab ou Bitbucket.

   - Lors de la configuration du site, indiquer la commande de build `npm run build` et le dossier de publication `dist`.

   - Ne pas oublier d'ajouter la variable d'environnement `VITE_API_URL` dans les paramètres du site sur Netlify.
